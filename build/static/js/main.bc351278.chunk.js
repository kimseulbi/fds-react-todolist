(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(47)},45:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n(5),o=n(7),s=n(6),u=n(8),i=n(0),c=n.n(i),l=n(16),d=n.n(l),p=n(2),h=n.n(p),m=n(3),f=n(17),g=n.n(f).a.create({baseURL:"https://unequaled-suit.glitch.me/"});g.interceptors.request.use(function(e){var t=localStorage.getItem("token");return t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer "+t),e});var v=g,b=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}var n;return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:(n=Object(m.a)(h.a.mark(function e(t){var n,a,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements.username.value,a=t.target.elements.password.value,e.next=5,v.post("/users/login",{username:n,password:a});case 5:r=e.sent,localStorage.setItem("token",r.data.token),this.props.onLogin();case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this;return c.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},c.a.createElement("input",{type:"text",name:"username"}),c.a.createElement("input",{type:"password",name:"password"}),c.a.createElement("button",null,"\uc804\uc1a1"))}}]),t}(i.Component),k=n(18),y=n.n(k),j=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={todos:[],loading:!1},n}var n,i,l,d;return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:(d=Object(m.a)(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,v.get("/todos");case 3:t=e.sent,n=t.data,this.setState({todos:n,loading:!1});case 6:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"handleSubmit",value:(l=Object(m.a)(h.a.mark(function e(t){var n,a,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({loading:!0}),n=t.target.elements.body.value,e.next=5,v.post("/todos",{body:n,complete:!1});case 5:return e.next=7,v.get("/todos");case 7:a=e.sent,r=a.data,this.setState({todos:r,loading:!1});case 10:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"handleDelete",value:(i=Object(m.a)(h.a.mark(function e(t,n){var a,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,v.delete("/todos/"+n);case 3:return e.next=5,v.get("/todos");case 5:a=e.sent,r=a.data,this.setState({todos:r,loading:!1});case 8:case"end":return e.stop()}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"handleLogout",value:(n=Object(m.a)(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),this.setState({loading:!0}),localStorage.removeItem("token"),this.props.onLogout();case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=y()({loading:this.state.loading});return c.a.createElement("div",{className:t},c.a.createElement("h1",null,"\ud560 \uc77c \ubaa9\ub85d"),c.a.createElement("button",{onClick:function(t){return e.handleLogout(t)}},"\ub85c\uadf8\uc544\uc6c3"),c.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},c.a.createElement("input",{type:"text",name:"body"}),c.a.createElement("button",null,"\ucd94\uac00")),c.a.createElement("ul",null,this.state.todos.map(function(t){return c.a.createElement("li",{key:t.id},t.body,c.a.createElement("button",{onClick:function(n){return e.handleDelete(n,t.id)}},"\uc0ad\uc81c"))})))}}]),t}(c.a.Component),w=(n(45),function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={page:localStorage.getItem("token")?"todo-list":"login"},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleLogin",value:function(){this.setState({page:"todo-list"})}},{key:"handleLogout",value:function(){this.setState({page:"login"})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"App"},"login"===this.state.page?c.a.createElement(b,{onLogin:function(){return e.handleLogin()}}):"todo-list"===this.state.page?c.a.createElement(j,{onLogout:function(){return e.handleLogout()}}):null)}}]),t}(c.a.Component)),O=document.getElementById("root");d.a.render(c.a.createElement(w,null),O)}},[[19,2,1]]]);
//# sourceMappingURL=main.bc351278.chunk.js.map